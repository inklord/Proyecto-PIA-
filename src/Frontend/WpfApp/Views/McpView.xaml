<Page x:Class="WpfApp.Views.McpView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Asistente Mirmecólogo" Background="{StaticResource MainBackgroundBrush}">
    
    <Grid Margin="20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/> <!-- Chat Area -->
            <ColumnDefinition Width="1*"/> <!-- Context/Info Area -->
        </Grid.ColumnDefinitions>
        
        <!-- Área de Chat -->
        <Border Background="White" CornerRadius="3" Margin="0,0,20,0">
            <Border.Effect>
                <DropShadowEffect BlurRadius="5" ShadowDepth="1" Color="#EEEEEE"/>
            </Border.Effect>
            <Grid Margin="15">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Text="Comunidad / Asistente IA" FontSize="20" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,15"/>
                
                <TextBox x:Name="TxtHistory" Grid.Row="1" IsReadOnly="True" 
                         VerticalScrollBarVisibility="Auto" TextWrapping="Wrap"
                         BorderThickness="0" Background="Transparent"
                         FontFamily="Segoe UI" FontSize="14" Foreground="#444444"
                         Padding="5"/>
                
                <Grid Grid.Row="2" Margin="0,15,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="TxtQuery" Height="40" VerticalContentAlignment="Center" Padding="10,0"
                             BorderBrush="#DDDDDD" BorderThickness="1" Background="#FAFAFA"/>
                    <Button Content="Enviar" Grid.Column="1" Click="BtnSend_Click" Style="{StaticResource PrimaryButton}" Width="80" Margin="10,0,0,0"/>
                </Grid>
            </Grid>
        </Border>

        <!-- Área Lateral: Especie Detectada -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <TextBlock Text="Especie Relacionada" FontSize="14" FontWeight="Bold" Foreground="{StaticResource TextSecondaryBrush}" Margin="0,0,0,10"/>
            
            <Border Grid.Row="1" Background="White" CornerRadius="3">
                 <Border.Effect>
                    <DropShadowEffect BlurRadius="5" ShadowDepth="1" Color="#EEEEEE"/>
                </Border.Effect>
                <StackPanel>
                    <Image x:Name="ImgSpecies" Height="250" Stretch="Uniform"/>
                    <StackPanel Margin="15">
                        <TextBlock x:Name="TxtSpeciesName" TextWrapping="Wrap" FontSize="16" FontWeight="Bold" FontStyle="Italic" Foreground="{StaticResource TextPrimaryBrush}" Margin="0,0,0,5"/>
                        <TextBlock>
                            <Hyperlink x:Name="LinkWiki" RequestNavigate="Hyperlink_RequestNavigate">Ver en AntWiki</Hyperlink>
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</Page>